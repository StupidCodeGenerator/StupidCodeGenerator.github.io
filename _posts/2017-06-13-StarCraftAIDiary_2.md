---
title: "星际争霸AI日记_2"
layout: post
description: ""
robots: none
---

12:21 

今天计划是首先把血池造出来。7人口停农民，等到200金钱造血池

1. 关于如何获得人口上限

GameWrapper可以获得self（pLayer类型），然后里面有supplyTotal 数据， int类型，表示当前人口上限。
supplyUsed表示当前已经使用的人口

12:35

写完7个人口停农民。可以试试

12:55

停农民成功，下一步进行200人口造血池。

13:05

200金钱的时候，所有农民全去造狗池了！卧槽！

如果将来AI复杂了，需要一个“任务表”。表示当前农民正在进行的工作。这样农民不会去做重复的工作.

13：15

农民已经可以选择一个去造血池了，但是是抱着矿去的。需要增加一个判定条件。

另外，血池放下以后，需要继续等待。等到血池造好，要造三条狗。

三条狗造完，重新开始造农民。

需要研究一下这个过程中，农民和狗的比例。初步定1比1的造。一条农民一条狗。

等到350钱，造分矿。

看样子，即使是一个小AI，也需要一个TopManager了。另外SupplyManager需要一个任务表，知道目前总体上正在做的工作。每一条任务应该是一个结构体，拥有一个任务类型，优先级，数量，等等。

21:02

AI 造出了最初的三只狗。但是却停止了造房子，并且没有开分矿。

另外，游戏中的位置是如何算的？

都能获取到哪些位置？

21:18

StatusTable 状态表，最简单的实现方式是一个结构体，包含若干布尔值，数值等。比如当前是否在建造房子，是否正在开分矿，是否需要造农民，是否爆兵，每一种建筑都造了几个，等等。

TaskList， 任务列表，一个链表。每一个元素应该是一个结构体，里面包含任务类型等数据。

21:59

没必要搞链表，用一个指针数组就可以，然后有一个MAX_TASKS来表示最多可以放入多少任务，SUPPLY_TASK_EMPTY 用来表示空任务。但是这个指针数组还是用NULL来表示当前位置为空没有任务。当加入新任务的时候，遍历这个数组来寻找空位插入。

一般来说，任务下达不会非常频繁，所以不用考虑效率问题。

22:38

乱了，乱了

先从架构开始搭，首先是 全功能的 SupplyManager。包含一个由数组构成的Tasks数组，一个由一堆布尔值和其他类型变量组成的，松散的Status集。

Tasks配套有 AddTask，RemoveTask函数。（先实现AddTask）

Status 就手动配置就好了。

Tasks 里面的任务，会在Update中被处理。如果Task满足条件，就会被执行然后被消除

说白了， Tasks里面包含的是未完成的任务

其实如果任务足够简单，可以用一组布尔值来判定。但是为了将来扩展方便，还是简单的用数组记一下。

Tasks 需要跟一个Has函数，否则会不断的增加Task

我是否应该用一组布尔值表示任务？

不行。将来加入侦查任务等，会有其他的参数。布尔值仅仅能表示一些基本的任务，比如人口不足

如何避免同样的Task被重复插入？换言之，需要研究一下结构体的HashCode算法，或者是自己写一个逻辑，总而言之，拥有同样内容的Task不可以被重复插入。