---
title: "星际争霸AI日记_23"
layout: post
description: ""
robots: none
---


11:21 

首先实现矿点的查找

在每一帧的时候，遍历所有能够看到的矿点，并且检查他们的归属地：

是否与某一矿点的距离小于30Tile？

如果大于30Tile则是一个新的矿点。

15:53

原计划的方法在侦查阶段过于繁杂，需要在每一帧不断的检查每一个点。

所以不如这样，首先收集数据，只要是看到过的矿全部记录下来（因为战争迷雾会导致获得不到自己视野外已经看到过的矿）。

当开分矿的时候，进行一次二维点聚类分析就可以了。

16:45

擦擦，原来一上来就知道所有的矿的位置。AI是读取了地图信息的。那么就可以写一个程序计算建造点，而不用考虑矿点侦查的问题了

也就是说，可以在一开始的时候，进行一次矿点计算。

首先要根据矿之间的距离进行聚合，生成矿脉。虽然地图上也会有散列的矿，但是大多数情况下矿是聚在一起的。

方法：

首先，定义一个“矿点集合”

遍历所有的矿。对每一个矿，检查它是否和某一个矿点集合里面的任意一个矿的距离小于20Tile。

否则，创建一个新的矿点集合容纳他。

这样经过一次遍历，就可以分出来.

18:07

貌似没有必要把气矿也搞一个列表存在ResroucePoint里面。因为可以在生成分矿矿点的时候，检查有无气矿

19:34

很好，现在分片的问题已经解决。下面要解决的是如何计算出最佳建造点。

有一个比较暴力的解决方法，就是针对每个矿进行10次的buildLocation计算，然后找出平均距离最近的点.

在目前我还没想到太好的其他的方法并且我需要我把项目往前推进的时候，就先这么着。

20:31

貌似在没有探路的情况下，getBuildLocation 函数会变得失去控制，并且很慢。

那么这样，简化一下。生成最佳建造点的时机不放在开始，并且只限定于农民范围内的点。

也就是说，既然已经找到了矿点，那么就在开分矿的时候派一个农民去矿点。

20:44

休息一下，构思一下矿点问题。

20:54

首先，BackManager要有一个状态用来指示现在需要开分矿, 这是一个独立的状态，停止发展并且派出农民。

以后再优化这个时间线。但是总是感觉星际的AI应该用时间线来写，并且应该是并发的。

先这么着吧。